using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace TheInfiniteCrusade.NewContent.MartialArchetypes
{
    class Formcrafter
    {
        /*
         * Power, skill, and function are rather nebulous subjects, and no singular school of combat claims to offer a solution which holistically masters any of these disciplines. This has driven some dedicated martial artists to pursue a strange, hybridized approach to many styles of fighting, hoping to distill a perfect technique of battle from these myriad sources. 
         */
        /*Class Skills

If a formcrafter knows a maneuver from a discipline, he treats the discipline skill of that discipline as a class skill.
Maneuvers

A formcrafter begins his career with knowledge of three martial maneuvers. All disciplines are available for the formcrafter to select maneuvers from.

Once the formcrafter knows a maneuver, he must ready it before he can use it (see Maneuvers Readied, below). A maneuver usable by formcrafter is considered an extraordinary ability unless otherwise noted in it or its discipline’s description. A formcrafter’s maneuvers are not affected by spell resistance, and he does not provoke attacks of opportunity when he initiates one.

The formcrafter learns additional maneuvers at higher levels, as indicated on Table: Archetype Maneuver Progression. The maximum level of maneuvers gained through formcrafter levels is limited by those listed in that table as well, although this restriction does not apply to maneuvers added to his maneuvers known through other methods, such as prestige classes or the Advanced Study feat. A formcrafter must meet a maneuver’s prerequisite to learn it. See Systems and Use for more details on how maneuvers are used.

Upon reaching 4th level, and at every even numbered initiator level thereafter (6th, 8th, 10th, and so on), the formcrafter can choose to learn a new maneuver in place of one he already knows. In effect, he loses the old maneuver in exchange for the new one. He can choose a new maneuver of any level he likes, as long as he observes the restriction on the highest-level maneuvers he knows; the formcrafter need not replace the old maneuver with a maneuver of the same level. He can swap only a single maneuver at any given level.

A formcrafter’s initiation modifier is Wisdom, and each formcrafter level is counted as a full initiator level.
Maneuvers Readied

A formcrafter can ready all three of his maneuvers known at 1st level, and as he advances in level and learns more maneuvers, he is able to ready more, but must still choose which maneuvers to ready. A formcrafter must always ready his maximum number of maneuvers readied. He readies his maneuvers by meditating or performing martial katas for ten minutes. The maneuvers he chooses remain readied until he decides to practice again and change them. The formcrafter does not need to sleep or rest for any long period of time in order to ready his maneuvers; any time he spends ten minutes meditating, he can change his readied maneuvers.

A formcrafter begins an encounter with all his readied maneuvers unexpended, regardless of how many times he might have already used them since he chose them. When he initiates a maneuver, he expends it for the current encounter, so each of his readied maneuvers can be used once per encounter (unless he recovers them, as described below).

In order for the formcrafter to recover maneuvers, he must re-evaluate his own abilities as a full-round action. When he does, he replaces a number of expended maneuvers equal to his initiation modifier (minimum 2) with new readied formcrafter maneuvers he knows. If he wishes, he may replace these maneuvers with themselves, effectively recovering them. In addition, whenever the formcrafter recovers maneuvers in this way, he may change styles as a free action. Alternately, the formcrafter may take a brief moment to collect his thoughts to recover a single maneuver as a standard action.
Stances

A formcrafter begins his career with knowledge of one stance from any discipline open to formcrafters. At 4th, 7th, 11th, and 13th levels, he can select an additional stance to learn. The maximum level of stances gained through formcrafter levels is limited by those listed in Table: Archetype Maneuver Progression. Unlike maneuvers, stances are not expended and the formcrafter does not have to ready them. All the stances he knows are available to him at all times, and he can change the stance he is currently maintaining as a swift action. A stance is an extraordinary ability unless otherwise stated in the stance or discipline description.

Unlike with maneuvers, a formcrafter cannot learn a new stance at higher levels in place of one he already knows.

This ability replaces flurry of blows and stunning fist.
Style Savant (Ex)

A formcrafter gains Fuse Styles as a bonus feat. In addition, a formcrafter considers his unarmed strike to be a discipline weapon for all disciplines.

This ability replaces the bonus feat gained at 1st level.
Bonus Feat

At 2nd level, and every four levels thereafter, a formcrafter may select a bonus style feat, the Discipline Focus feat, or the Advanced Study feat. He does not need to meet the prerequisites of that feat. Starting at 6th level, a formcrafter can choose to instead gain a wildcard style slot. Whenever he enters one or more styles, he can spend his wildcard style slots to gain feats in those styles’ feat paths (such as Black Seraph Annihilation) as long as he meets the prerequisites.

Each time he changes styles, he can also change these wildcard style slots.

This ability replaces a monk’s standard bonus feats.
Fuse Styles (Ex)

At 5th level, a formcrafter can fuse two of the styles he knows. The formcrafter can have two style feats active at once. Starting a stance provided by a style feat is still a swift action, but when the formcrafter switches to another style feat, he can choose one style whose stance is already active to persist. He may only have two style feat stances active at a time.

At 9th level, the formcrafter can fuse three styles at once. He can have the effects of three style feats active at the same time.

At 13th level, the formcrafter can fuse four styles at once. He can have the effects of four style feats active at the same time. Furthermore, he can enter up to four stances as a free action by spending 1 point from his ki pool.

At 17th level, the formcrafter can have the stances of five style feats active at once, and can change any of these styles as a free action.

This ability replaces Style Strike
Ki Powers

In addition to the normal Ki Powers available to the unchained monk, he may select from the following ki powers.

    Combat Improvisation (Su): A formcrafter with this ki power can use his ki to obtain flashes of inspiration in the midst of combat. By spending a ki point as a free action, he can add one martial maneuver that he is capable of learning to his list of readied maneuvers for a number of rounds equal to his initiation modifier (minimum 1). The formcrafter does not need to know the maneuver in order to obtain it in this way, but this maneuver cannot be recovered.
    Discipline Synergy (Ex): If a formcrafter with this ki power is ever in a stance of same discipline as a style feat they are using, they gain the benefits of the Discipline Focus feat (if they do not already possess it) for that discipline.
    Martial Tenacity (Ex): When making a skill check as part of a martial maneuver or the effects of a style feat, the formcrafter may spend a ki point as a free action to change the modifier of the check to his monk level + his initiation modifier.
         */
    }
}
