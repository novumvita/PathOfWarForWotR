using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace TheInfiniteCrusade.NewContent.MartialArchetypes
{
    class FerineSentinal
    {
        /*
         * Since the earliest days of martial arts, dedicates have looked to nature to refine their techniques. From the predator, disciples learned to kill. From the scavenger, how to move among more dangerous creatures. From the great beast, how to drive a foe away. As the world has evolved, all but a few have forgotten the primordial foundations of their arsenal. Those few who still open their senses to the endless battle of the wilds find that there is still much to learn, and these ferine sentinels work alongside their companions as a potent force which blends humanistic tact with bestial might. 
         */
        /*
         * Class Skills

A ferine sentinel adds Diplomacy and Acrobatics to her list of class skills
Maneuvers

A ferine sentinel begins her career with knowledge of three martial maneuvers. The disciplines available to her are Brutal Crocodile, Golden Lion, Primal Fury, and Thrashing Dragon.
Editor's Note: Discipline Exchanges

    Fool's Errand, Mangled Gear, Radiant Dawn, Roaring Mouse, Surging Shark: Any character of any class can access any of these disciplines by trading one of their available disciplines for one of the listed disciplines. If they do, they gain its associated skill as a class skill.
    Leaden Hyena: Any character of any class which has access to Golden Lion may gain Leaden Hyena in exchange for one martial discipline they possess. They gain Bluff as a class skill.

Once the ferine sentinel knows a maneuver, she must ready it before she can use it (see Maneuvers Readied, below). A maneuver usable by ferine sentinel is considered an extraordinary ability unless otherwise noted in it or its discipline’s description. A ferine sentinel’s maneuvers are not affected by spell resistance, and she does not provoke attacks of opportunity when she initiates one.

The ferine sentinel learns additional maneuvers at higher levels, as indicated on Table: Archetype Maneuver Progression. The maximum level of maneuvers gained through ferine sentinel levels is limited by those listed in that table as well, although this restriction does not apply to maneuvers added to his maneuvers known through other methods, such as prestige classes or the Advanced Study feat. A ferine sentinel must meet a maneuver’s prerequisite to learn it. See the Systems and Use chapter in Path of War for more details on how maneuvers are used.

Upon reaching 4th level, and at every even numbered initiator level thereafter (6th, 8th, 10th, and so on), the ferine sentinel can choose to learn a new maneuver in place of one she already knows. In effect, she loses the old maneuver in exchange for the new one. She can choose a new maneuver of any level she likes, as long as she observes the restriction on the highest-level maneuvers she knows; the ferine sentinel need not replace the old maneuver with a maneuver of the same level. She can swap only a single maneuver at any given level. A ferine sentinel’s initiation modifier is Wisdom, and each ferine sentinel level is counted as a full initiator level.
Maneuvers Readied

A ferine sentinel can ready all three of her maneuvers known at 1st level, and as she advances in level and learns more maneuvers, she is able to ready more, but must still choose which maneuvers to ready. A ferine sentinel must always ready her maximum number of maneuvers readied. She readies her maneuvers by performing weapon drills or praying to her deity for ten minutes. The maneuvers she chooses remain readied until she decides to meditate again and change them. The ferine sentinel does not need to sleep or rest for any long period of time in order to ready her maneuvers; any time she spends ten minutes in communion with the wild, she can change her readied maneuvers.

A ferine sentinel begins an encounter with all her readied maneuvers unexpended, regardless of how many times she might have already used them since she chose them. When she initiates a maneuver, she expends it for the current encounter, so each of her readied maneuvers can be used once per encounter (unless she recovers them, as described below).

In order for the ferine sentinel to recover maneuvers, she or her animal companion must draw upon the forces of the wild to enhance their abilities as a full-round action. When one of them does, the ferine sentinel recovers a number of maneuvers equal to her initiation modifier (minimum 2) and she as well as any animal companions she possess gain temporary hit points equal to her initiator level. Alternately, the ferine sentinel may focus inward and recover a single maneuver as a standard action.
Stances

A ferine sentinel begins play with knowledge of one stance from any discipline open to ferine sentinel. At 4th, 7th, 11th, and 13th levels, she can select an additional stance to learn. The maximum level of stances gained through ferine sentinel levels is limited by those listed in Table: Archetype Maneuver Progression. Unlike maneuvers, stances are not expended and the ferine sentinel does not have to ready them. All the stances she knows are available to her at all times, and she can change the stance she is currently maintaining as a swift action. A stance is an extraordinary ability unless otherwise stated in the stance or discipline description.

Unlike with maneuvers, a ferine sentinel cannot learn a new stance at higher levels in place of one she already knows.

This ability replaces spellcasting
Ferine Conduit (Su)

A ferine sentinel’s companion operates as a conduit for their martial power. While under the effect of animal focus (or a similar ability such as vermin focus or plant focus), an animal companion shares the benefits of any stances or style feats that the ferine conduit is using and can initiate any unexpended maneuver that the ferine sentinel has readied (this expends the maneuver for the ferine sentinel).

In addition, a ferine sentinel can initiate boosts, counters, and strikes through any of her companions that is currently under the effect of ferine conduit. The ferine sentinel uses special rules, listed here, when using these maneuvers through this class feature.

When initiating a maneuver that allows for an attack, the ferine sentinel may use her companion’s space and reach as if it were her own for this attack, but uses her own weapons (She may choose to use her own reach when using this ability). She cannot make more attacks than she normally could, nor does she gain additional actions while using this ability, nor does it allow her to make other sorts of attacks through her companion; it merely allows her to initiate maneuvers using her companion as a medium. She still suffers any penalties for attacking a creature she cannot see unless she is using her companion’s senses through improved empathic link.

Attacks made using this ability are treated in all ways as if the ferine sentinel had made the attack (for the purposes of attack bonus, weapon used, feats, the effects of boosts or spells, and the like). Ranged attacks made through allies with this ability do not provoke attacks of opportunity.

The ferine sentinel uses that companion’s space and reach as if it were her own during this attack or maneuver, and uses her own weapons. She may also attack her companion with this ability.

If the ferine sentinel initiates a maneuver through a companion that has additional effects on its initiator (such as allowing movement, teleporting the initiator, or granting bonuses), the ferine sentinel is the one who gains such effects. If a maneuver includes a charge attack, the ferine sentinel does not charge, and instead may move up to her speed as part of the maneuver. She is not treated as having charged.

Otherwise, when initiating a maneuver, a ferine sentinel may treat herself as if she were in the position of the companion she is using her ferine conduit class feature through, or in a space adjacent to that companion.

When a ferine sentinel initiates a counter through a companion, the ferine sentinel treats herself as if she was her companion for the purposes of how the counter’s effect resolves (allowing her to stop attacks against that companion, use the counter in place of the companion’s saving throw, and the like). If the counter normally allows the initiator to attack or move, the ferine sentinel takes that movement (as noted above), and can either make the attack herself or make it through the companion in question.
Magical Understanding (Ex)

A ferine sentinel is considered to be able to cast spells as a hunter of her level for the purpose of spell trigger and spell completion items.
Lore of the Beasts (Ex)

Whenever the ferine sentinel’s animal companion would gain a bonus trick, the ferine sentinel may choose to instead learn a new maneuver of any level she can learn or gain the Extra Readied Maneuver feat as a bonus feat. 
         */
    }
}
