using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace TheInfiniteCrusade.NewContent.MartialArchetypes
{
    class AmbushHunter
    {
        /*
         * Stalkers in the wilderness who specialize in sudden, vicious strikes from hidden vantage points, the Ambush Hunters and their animal companions are masters of stealth and of overwhelming assault. 
         */
        /*
         * Maneuvers

An ambush hunter begins his career with knowledge of three martial maneuvers. The disciplines available to him are Golden Lion and Primal Fury. Once the ambush hunter knows a maneuver, he must ready it before he can use it (see Maneuvers Readied, below). A maneuver usable by ambush hunters is considered an extraordinary ability unless otherwise noted in it or its discipline’s description. An ambush hunter’s maneuvers are not affected by spell resistance, and he does not provoke attacks of opportunity when he initiates one.
Editor's Note: Martial Companions

    Fool's Errand, Mangled Gear, Radiant Dawn, Roaring Mouse, Surging Shark: Any character of any class can access any of these disciplines by trading one of their available disciplines for one of the listed disciplines. If they do, they gain its associated skill as a class skill.
    Brutal Crocodile: Any character of any class which has access to Primal Fury may gain Brutal Crocodile in exchange for one martial discipline they possess. They gain Climb as a class skill.
    Leaden Hyena: Any character of any class which has access to Golden Lion may gain Leaden Hyena in exchange for one martial discipline they possess. They gain Bluff as a class skill.

The ambush hunter learns additional maneuvers at higher levels, as indicated on Table: Archetype Maneuver Progression. The maximum level of maneuvers gained through ambush hunter levels is limited by those listed in that table as well, although this restriction does not apply to maneuvers added to his maneuvers known through other methods, such as prestige classes or the Advanced Study feat. An ambush hunter must meet a maneuver’s prerequisite to learn it. See the Systems and Use chapter in Path of War for more details on how maneuvers are used.

Upon reaching 4th level, and at every even numbered initiator level thereafter (6th, 8th, 10th, and so on), the ambush hunter can choose to learn a new maneuver in place of one he already knows. In effect, he loses the old maneuver in exchange for the new one. He can choose a new maneuver of any level he likes, as long as he observes the restriction on the highest-level maneuvers he knows; the ambush hunter need not replace the old maneuver with a maneuver of the same level. He can swap only a single maneuver at any given level. An ambush hunter’s initiation modifier is Wisdom, and each ambush hunter level is counted as a full initiator level.
Maneuvers Readied

An ambush hunter can ready all three of his maneuvers known at 1st level, and as he advances in level and learns more maneuvers, he is able to ready more, but must still choose which maneuvers to ready. An ambush hunter must always ready his maximum number of maneuvers readied. He readies his maneuvers by meditating or observing his animal companion for ten minutes. The maneuvers he chooses remain readied until he decides to practice again and change them. The ambush hunter does not need to sleep or rest for any long period of time in order to ready his maneuvers; any time he spends ten minutes meditating, he can change his readied maneuvers.

An ambush hunter begins an encounter with all his readied maneuvers unexpended, regardless of how many times he might have already used them since he chose them. When he initiates a maneuver, he expends it for the current encounter, so each of his readied maneuvers can be used once per encounter (unless he recovers them, as described below).

In order for the ambush hunter to recover maneuvers, he must blend into the shadows and position himself to strike. As a full-round action, the ambush hunter and his animal companion gain the ability to use the Stealth skill while being observed for one round, then each can make a Stealth check to hide and move up to their speed. When he does so, he recovers a number of expended maneuvers equal to his ambush hunter initiation modifier (minimum 2). The ambush hunter and his animal companion do not take a penalty on their Stealth checks from moving while using this ability. Alternately, the ambush hunter may take a moment to reassess his prey, recovering a single maneuver as a standard action.
Stances Known

An ambush hunter begins his career with knowledge of one stance from any discipline open to ambush hunters. At 4th, 7th, 11th, and 13th levels, he can select an additional stance to learn. The maximum level of stances gained through ambush hunter levels is limited by those listed in Table: Archetype Maneuver Progression. Unlike maneuvers, stances are not expended and the ambush hunter does not have to ready them. All the stances he knows are available to him at all times, and he can change the stance he is currently maintaining as a swift action. A stance is an extraordinary ability unless otherwise stated in the stance or discipline description.

Unlike with maneuvers, an ambush hunter cannot learn a new stance at higher levels in place of one he already knows.

This ability replaces spells.
Martial Style (Ex)

At 1st level, the ambush hunter selects an additional martial discipline to gain access to from Table: Ambush Hunter Disciplines. This choice also determines which combat styles he can choose from when he gains the combat style class feature. If the ambush hunter does not have the discipline’s associated skill as a class skill, he gains it as a class skill.

Table: Ambush Hunter Disciplines
Discipline (associated skill) 	Allowed Combat Styles
Broken Blade (Acrobatics) 	Natural Weapon or Two-Weapon Combat
Iron Tortoise (Bluff) 	Thrown or Weapon and Shield
Piercing Thunder (Acrobatics) 	Mounted or Two-Handed Weapons
Scarlet Throne (Sense Motive) 	Mounted or Two-Handed Weapons
Solar Wind (Perception) 	Archery, Crossbow or Thrown
Tempest Gale (Sleight of Hand) 	Archery, Crossbow or Thrown
Thrashing Dragon (Acrobatics) 	Thrown or Two-Weapon Combat
Martial Companion (Ex)

At 4th level, an ambush hunter gains the companionship of a loyal animal companion. This functions as the ranger’s hunter’s bond class feature except for the following. The ambush hunter’s animal companion gains a list of maneuvers and stances known equal to 1/2 the number of maneuvers or stances known by the ambush hunter (rounded down). The animal companion can only learn maneuvers from the Primal Fury discipline, and treats its natural attacks as Primal Fury discipline weapons. For example, a 4th level ambush hunter knows 5 maneuvers and 2 stances; his animal companion would learn 2 maneuvers and 1 stance from the Primal Fury discipline.
Editor's Note: Martial Companions

Any companion creature that learns maneuvers gains access to the Roaring Mouse discipline for free, regardless of any other restrictions on their maneuvers. They gain Escape Artist as a class skill.

The animal companion does not ready its maneuvers; it has access to each of its known maneuvers at all times.

When the animal companion initiates a maneuver, the ambush hunter expends one of his readied maneuvers of his choice. If the ambush hunter has no unexpended maneuvers, the animal companion cannot initiate its maneuvers. The animal companion’s initiation modifier is Wisdom, and its initiator level is equal to the ambush hunter’s initiator level.

This ability replaces hunter’s bond.
Ambush Tactics (Ex)

The ambush hunter is adept at maneuvering with his animal companion to take advantage of any weakness his enemies present. Starting at 4th level, whenever an ambush hunter or his animal companion attack a flat-footed creature or are both flanking the same creature, they both add the ambush hunter’s initiation modifier as a bonus on damage rolls made with strikes against that flat-footed or flanked creature. Whenever the ranger and the animal companion successfully attack the same creature in a single round, the ambush hunter recovers one expended maneuver.

This ability replaces favored enemy.
Pack Savagery (Ex)

Starting at 8th level, whenever the ambush hunter or his animal companion initiates a boost from the Primal Fury or Golden Lion disciplines, both the ambush hunter and his animal companion gain the benefits of the boost. The ambush hunter and the animal companion can only benefit from one such boost per round, even if they use this ability.

This ability replaces quarry.
Unbreakable Bond (Su)

At 19th level, the ambush hunter’s bond with his animal companion is so strong that it transcends time, space, life, and death. The ambush hunter always knows the exact location of his animal companion, regardless of distance (even if the animal companion is on another plane) and can view his animal companion’s location as if by a scrying spell for a number of minutes per day equal to his ambush hunter initiation modifier. The caster level for this effect is equal to the ambush hunter’s initiator level. In addition, if the ambush hunter’s animal companion dies, it reincarnates 24 hours later in a random location within 1 mile of the ambush hunter. 
         */
    }
}
